(window.webpackJsonp=window.webpackJsonp||[]).push([[85],{486:function(e,t,a){"use strict";a.r(t);var n=a(5),i=a.n(n),s=a(11),o=a(4),r=a(18),c=a(36),d=a(37),l=a(40),p=a(38),g=a(39),u=a(3),m=a.n(u),h=a(31),v=a(24),b=a(135),D=a(20),f=a.n(D),y=a(80),A=a(91),O=a(75),j=a(134),w=a(87),E=a(13),_=a(132),S=a(9),L=a(109),x=a(25),P=(a(589),function(e){var t=e.children;return m.a.createElement("div",{className:"lapserNudgeContainer"},t)}),R=a(44),N=a(16),k=a(34),I=a(502),H=a(73),T=a(8),W=a(6),C=a(0),F=a(110),M=a(131),B=a(143);var V=B.a.HOMEPAGE_VISITED,U=B.a.LAPSER,z=f()({loader:function(){return Promise.resolve().then(a.bind(null,79))},loading:function(){return m.a.createElement("div",null)}}),K=f()({loader:function(){return a.e(161).then(a.bind(null,77))},loading:function(){return m.a.createElement("div",null)}}),q=function(e){function t(e){var a;Object(c.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e))).updateBannerAppendData=function(e){a.setState(function(){return{bannerData:e,recoResolvedFlag:!0}})},a.updateVmaxBannerAppendData=function(){a.setState(function(){return{isVmaxRemoved:!0}})},a.fetchRecommendedData=function(){var e=a.props,t=e.pageType,n=e.country,i=e.displayLanguage,s=e.contentLanguages,o=e.region,r=e.userType;e.recommendations&&a.props.getRecommendedData({collectionId:t,country:n,translation:i,languages:s,version:6,region:o,userType:r}),a.isRecoApiCalled=!0},a.fetchData=function(){var e=a.props.pageData,t=e.data,n=e.totalBuckets;!e.isPending&&t.length<n&&a.setState({page:a.state.page+1},function(){var e=a.state.page,t=a.props,n=t.pageType,i=t.contentLanguages,s=t.displayLanguage,o=t.country;a.props.getAPI({pageType:n,page:e,languages:i,translation:s,country:o})})},a.getLandingAdsData=function(){var e=a.props,t=e.adsData,n=e.isVmax,i=t.vmaxMastheadAds,s=(i=void 0===i?{}:i).home,o=t.vmaxDisplayAds,r=void 0===o?{}:o;if(n&&Object.keys(t)&&t.isResolved&&(s||r.home)){var c=Object(R.f)(t,"home");a.vmaxBannerAd=c.vmaxBannerAd,a.vmaxDisplayAds=c.vmaxDisplayAds,a.vmaxDisplayAdPositionNumbers=c.vmaxDisplayAdPositionNumbers}else if(!a.bannerAd&&!a.nativeAds&&Object.keys(t)&&t.isResolved){var d=Object(R.e)(t,"home");a.bannerAd=d.bannerAd,a.nativeAds=d.nativeAds,a.adPositionNumbers=d.adPositionNumbers}},a.handleWidgetStatus=function(e){a.setState({isWidgetOpen:e})},a.closeLapserNudge=function(){a.setState({showLapserNudge:!1})},a.showLapserEventHandler=function(){a.setState({showLapserNudge:!0})};var n=e.countryList,i=e.isLoggedIn,s=n.svod_journey,o=(void 0===s?{}:s).web_app,r=(void 0===o?{}:o).sneakpeek;return void 0!==r&&r&&(!i||"undefined"!==typeof window&&window&&"true"===Object(T.q)(W.x))&&e.replaceRoute("/welcome"),a.state={page:1,isWidgetOpen:!0,toastMessage:"",bannerData:null,recoResolvedFlag:!0,showLapserNudge:!1,mastHeadWaitFlag:!0,isVmaxRemoved:!1},a.trayNumber=0,a.bannerAd=null,a.nativeAds=null,a.adPositionNumbers=[],a.isRecoApiCalled=!1,a.vmaxBannerAd={},a.vmaxDisplayAds=[],a.vmaxDisplayAdPositionNumbers=[],a.insContainerFlag=!1,a.vmaxBannerAddData=null,e.setHeaderProps({footerFlag:!1}),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e,t,a,n=this.props.isLoggedIn;Object(M.b)(U,this.showLapserEventHandler),Object(H.a)(this.fetchData,!1,"page-container"),1===this.state.page&&window.scrollTo(0,0),n&&this.props.getContinueWatchingData({country:this.props.country,translation:this.props.displayLanguage}),(n||!n&&Object(T.q)(W.v))&&this.fetchRecommendedData(),this.props.deviceCode&&this.props.updateDeviceState(0,this.props.deviceCode),e=V,t=this.props.isCampaignEventListenerAttached,a=this.props.addPendingCustomEvent,t?Object(M.a)(e):a&&"function"===typeof a&&a(e)}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.country,n=t.appHeaderPropObject,i=t.pageData,s=t.adsData;"IN"===a&&"desktop_web"===Object(T.r)()&&this.state.mastHeadWaitFlag&&s&&s.home&&window&&window.VMAXSDK&&window.VMAXSDK.Events&&this.setState(function(){return{mastHeadWaitFlag:!1}});var o=i.data,c=Object(r.a)(o);i.data.length>0&&i.totalBuckets>i.data.length&&!i.isPending&&e.pageData.data.length!==i.data.length&&(Object(H.a)(this.fetchData,!1,"page-container"),1===this.state.page&&(window.scrollTo(0,0),this.props.toast&&this.setState({toastMessage:this.props.toast}))),this.isRecoApiCalled||this.props.isLoggedIn||!Object(T.q)(W.v)||this.fetchRecommendedData(),!n.footerFlag&&(c&&c.length>6||i&&i.totalBuckets>0&&i.totalBuckets<=5)&&this.props.setHeaderProps({footerFlag:!0})}},{key:"componentWillUnmount",value:function(){this.props.pageData.totalBuckets>this.props.pageData.data.length&&Object(H.a)(this.fetchData,!0,"page-container"),this.props.clearData(),Object(w.clearToastData)(),this.props.toast&&this.props.clearToast(),Object(M.c)(U,this.showLapserEventHandler)}},{key:"render",value:function(){var e=this,t=this.props,a=t.continueWatchingData,n=t.z5Strings,i=t.recommendedData,s=t.isLoggedIn,c=t.isRecommendedError,d=t.isRecommendedSuccess,l=t.isWatchHistoryError,p=t.isWatchHistorySuccess,g=t.isAppInstalled,u=t.country,h=t.recommendations,v=t.isVmax,b=t.pageData,D=t.adsData,f=D.vmaxMastheadAds,y=D.keyValues,A=void 0===y?{}:y,O={},j=b.data,w=Object(r.a)(j),_=Object(o.a)({},w.slice(0,1)[0]),H=(_||{}).items,F=void 0===H?[]:H;this.state.bannerData&&this.state.bannerData.items&&this.state.bannerData.items.length?_.items=this.state.bannerData.items:!this.state.recoResolvedFlag&&F.length&&(_.items=F.slice(0,3)),"IN"===u&&"desktop_web"===Object(T.r)()&&v&&f&&f.home&&F.length&&!_.items[1].tagid&&window&&window.VMAXSDK&&window.VMAXSDK.Events&&!this.state.isVmaxRemoved&&_.items.splice(1,0,f.home),this.state.isVmaxRemoved&&(_.items=_.items.filter(function(e){return!e.tagid&&!e.tag}));var M,B=Object(I.f)(this.props.metaData,this.props.allDisplayLanguages,this.props.displayLanguage),V=!1,U=1;j.length&&"banner"===Object(k.a)(j[0].tags)&&(U+=1),a&&a.length>0&&(U+=1,V=!0);var q,G=!1;if(N.g||(G=!Object(T.s)(W.S)),i&&Object.keys(i).length&&w.length&&i.buckets&&i.buckets.length){var X=i.rails_position;M=X+i.total-2;var J=Object.values(i.buckets).filter(function(e){return!(e.flags&&e.flags.Hero)});w.splice.apply(w,[X,0].concat(Object(r.a)(J))),q=Object.values(i.buckets).find(function(e){return e.flags&&e.flags.Hero})}if(N.g||this.getLandingAdsData(),!j.length&&this.props.pageData.isError)return m.a.createElement(x.s,{type:"notAvailable",pageDataUnavailable:!0});var Q=!N.g&&Object(T.q)(W.Kb)?Object(T.q)(W.Kb):"",Y=(!s||p||l)&&(c||d||!h),Z=!N.g&&!!Object(T.s)(W.B);return m.a.createElement(m.a.Fragment,null,m.a.createElement(x.H,{pageMeta:B,organizationSchemaData:!0,apiData:this.props.pageData.apiData,location:this.props.location,breadcrumbs:"",searchSchemaData:!0}),w&&w.length?m.a.createElement(m.a.Fragment,null,N.g||!this.bannerAd||v?null:this.bannerAd.map(function(e,t){return m.a.createElement(x.c,{key:e.div_id,adUnit:e.ad_tag,id:e.div_id,dimension:e.ad_dimension,adType:e.ad_type,adItem:t,position:e.position,pageType:"home",adTarget:A})}),v?Object(R.m)(this.vmaxBannerAd):null,!N.g&&s&&this.state.showLapserNudge&&!Z&&Object(E.zb)(this.props.campaignData)&&m.a.createElement(P,null,m.a.createElement(x.w,{showClose:!0,onClose:this.closeLapserNudge})),m.a.createElement("section",{className:"pageLanding"},"banner"===Object(k.a)(w[0].tags)?m.a.createElement(z,{viewData:_,recommendedBannerData:q,recoResolvedFlag:this.state.recoResolvedFlag,tag:"banner",updateBannerAppendData:this.updateBannerAppendData,updateVmaxBannerAppendData:this.updateVmaxBannerAppendData,mastHeadWaitFlag:this.state.mastHeadWaitFlag}):null,m.a.createElement("div",{className:"page-container"},a&&a.length>0?m.a.createElement(x.Q,{key:"continueWatching",trayData:a,tags:["continue_watching"],title:n.SETTINGS.CONTINUE_WATCH,viewAllFlag:!1,trayDetails:{title:"Continue Watching",index:U-1}}):null,w.filter(function(e){var t=Object(k.a)(e.tags);return t&&"banner"!==t&&"playlist"!==t}).map(function(t,a){var i=V?a+1:a,s=N.g?0:e.adPositionNumbers.indexOf(i);e.nativeAds&&e.nativeAds.length&&Y&&(O=Object(R.d)(e.nativeAds));var o={contentId:t.id,title:t.original_title,index:a+U,assetSubtype:t.asset_subtype||"N/A",talamoosModelName:t.modelName||"N/A",pendingDataAvailable:!1,isRecomendedColumn:!1};return m.a.createElement(m.a.Fragment,{key:"".concat(t.id,"_").concat(t.title,"_").concat(t.original_title)},!N.g&&!v&&e.adPositionNumbers.length&&e.nativeAds&&e.nativeAds.length&&Y&&!Object(L.d)(u,S.zb)&&s>-1?m.a.createElement(m.a.Fragment,null,m.a.createElement(x.c,{key:e.nativeAds[s].div_id,adUnit:e.nativeAds[s].ad_tag,id:e.nativeAds[s].div_id,dimension:e.nativeAds[s].ad_dimension,adType:e.nativeAds[s].ad_type,adItem:s+e.bannerAd.length,position:e.nativeAds[s].position,pageType:"home",adTarget:A})):null,v?Object(R.n)(o.index-1,e.vmaxDisplayAdPositionNumbers,e.vmaxDisplayAds):null,!N.g&&u&&Object(L.d)(u,S.zb)&&e.adPositionNumbers.length&&e.nativeAds&&e.nativeAds.length&&Y&&s>-1?m.a.createElement(m.a.Fragment,null,m.a.createElement(K,{key:e.nativeAds[s].div_id,id:e.nativeAds[s].div_id,containerId:e.nativeAds[s].container_id,ownerId:e.nativeAds[s].owner_id,params:e.nativeAds[s].params,position:e.nativeAds[s].position,check:!0})):null,m.a.createElement(x.Q,{trayData:t.items,key:"".concat(t.id,"_").concat(t.title,"_").concat(t.original_title),id:t.id,tags:Object(E.y)(t.asset_subtype,t.content_type,t.tags),title:t.title,originalTitle:t.original_title||t.title,viewAllFlag:"Reco"!==t.asset_subtype,trayDetails:o,modelName:t.modelName}),G&&!g&&e.state.isWidgetOpen&&a===M?m.a.createElement(x.e,{pwaString:n.PWA_STRING,widgetStatus:e.handleWidgetStatus,inFeedWidget:!0,widgetGroupType:C.l.IN_FEED}):null)})),this.state.toastMessage?m.a.createElement(x.P,{message:this.state.toastMessage}):null,Q?m.a.createElement(x.P,{message:Q,duration:2e3,style:{bottom:"0px"}}):null),O&&Object.keys(O).length>0?m.a.createElement(m.a.Fragment,null,m.a.createElement(K,{key:O.div_id,id:O.div_id,containerId:O.container_id,ownerId:O.owner_id,params:O.params,position:O.position})):null):m.a.createElement(m.a.Fragment,null,m.a.createElement(x.M,null)))}}]),t}(u.Component),G=function(){var e=Object(s.a)(i.a.mark(function e(t){var a,n,s,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.pageType,n=t.contentLanguages,s=t.displayLanguage,o=t.country,e.next=3,t.getAPI({page:1,pageType:a,languages:n,translation:s,country:o,replace:!0});case 3:N.g&&(t.setServerData({payload:{edgeCacheTag:a}}),t.clearServerData());case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();t.default=Object(h.c)(function(e){var t=e.UserData,a=e.InitialData,n=e.Settings,i=e.Login,s=e.UserSubscriptions,o=e.Profile,r=e.Campaign,c=r.IsEventListenerAttached,d=void 0!==c&&c,l=r.campaignData,p=void 0===l?{}:l,g=e.Home,u=n.content_language,m=n.display_language;return{pageData:g,recommendedData:g.recommendedData,userData:t,pageType:a.countryList[0].collections.web_app.home,adsData:a.adsData,contentLanguages:u,displayLanguage:m,country:a.location.country_code,statecode:a.location.state_code,metaData:a.seoMetaAssets["/"]||{},allDisplayLanguages:a.language.display,configLanguage:a.configJSON.languages,continueWatchingData:g.watchHistory,z5Strings:a.z5Strings,isLoggedIn:i.isLoggedIn,region:a.location.state_code,userType:a.userType,isWatchHistoryError:g.isWatchHistoryError,isWatchHistorySuccess:g.isWatchHistorySuccess,isRecommendedSuccess:g.isRecommendedSuccess,isRecommendedError:g.isRecommendedError,deviceCode:e.Profile.deviceCode,isAppInstalled:a.isAppInstalled,recommendations:e.InitialData.countryList[0].recommendations,toast:s.toast,appHeaderPropObject:e.Header.appHeaderProps,countryList:e.InitialData.countryList[0],profile:o,isVmax:a.adsData.isVmax,campaignData:p,isInitialDataPending:a.isPending,vmaxMastheadAds:a.adsData.vmaxMastheadAds,isCampaignEventListenerAttached:d}},function(e){return{getAPI:Object(v.b)(A.getHomePageData,e),clearData:Object(v.b)(A.clearHomePageData,e),clearServerData:Object(v.b)(O.clearServerData,e),setHeaderProps:Object(v.b)(j.setAppHeaderProps,e),getContinueWatchingData:Object(v.b)(A.getContinueWatchingData,e),setServerData:Object(v.b)(O.setServerData,e),getRecommendedData:Object(v.b)(A.getHomePageRecommendedData,e),updateDeviceState:Object(v.b)(w.updateDeviceState,e),clearToast:Object(v.b)(F.clearToast,e),replaceRoute:Object(v.b)(y.f,e),addPendingCustomEvent:Object(v.b)(_.addPendingEvent,e)}})(Object(b.frontloadConnect)(G,{onMount:!0,onUpdate:!1})(q))},502:function(e,t,a){"use strict";a.d(t,"e",function(){return i}),a.d(t,"f",function(){return s}),a.d(t,"d",function(){return o}),a.d(t,"c",function(){return r}),a.d(t,"a",function(){return c}),a.d(t,"b",function(){return d});var n=a(4),i=function(e,t){var a=e.find(function(e){return e.l_code===t}),n="";return a&&(n=a.name),n},s=function(e,t,a,s,o){var r=Object(n.a)({},e);if(Object.keys(r).length){if(r&&s)for(var c=0;c<s.length;c+=1){var d=o[c];o[c]||(d="-"),r.title=r.title.replace(new RegExp("\\".concat(s[c]),"g"),d),r.description=r.description.replace(new RegExp("\\".concat(s[c]),"g"),d)}var l="";"en"!==a&&t&&t.length>0&&(l=" in ".concat(i(t,a))),r.title=r.title.replace(new RegExp("\\<in {Regional Language}>","g"),l),r.description=r.description.replace(new RegExp("\\<in {Regional Language}>","g"),l)}return r},o=function(e){var t="";return e&&e.length>0&&e.map(function(a,n){return t+=a.value,n<e.length-1&&(t+=","),a}),t},r=function(e){var t="";return e&&e.length>0&&(t=e.join(",")),t},c=function(e){var t=[];return e&&e.length>0&&e.map(function(e){return t.push(e.split(":")[0].trim()),e}),t.join(", ")},d=function(e,t){var a="";return e&&e.length>0&&("all"!==t?a=e[0].title?e[0].title:"":e.map(function(t,n){return a+=t.title,n<e.length-1&&(a+=","),t})),a}},589:function(e,t,a){}}]);
//# sourceMappingURL=home.1678d105.chunk.js.map